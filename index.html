<!DOCTYPE html>
<html>
<head>
    <title>AutoLine Runtime</title>
    <meta charset="utf-8">
<style>
    div.grid {
        display: grid;
        grid-template-columns: 1fr;
        grid-template-rows: repeat(4, 1fr);
    }
    p {
        font-size: 60px;
        text-align: center;
    }
    progress {
        width: 100%;
        height: 50px;
        appearance: none;
    }
    /*The color of the bar itself*/
    progress::-webkit-progress-bar {
        background: rgb(234, 234, 234);
    }
    /*The colors of the bars' progress*/
    progress#Move::-webkit-progress-value {
        background: greenyellow;
    }
    progress#Stop::-webkit-progress-value {
        background: red;
    }
    label {
        font-size: 50px;
    }
</style>
</head>
<body>
    <div class="grid">
        <p id="Date"></p>
        <div>
            <label id="mValue" for="Move">Minutes Running: 0</label>
            <progress id="Move" value="0" max="630"></progress>
        </div>
        <div>
            <label id="sValue" for="Stop">Minutes Halted: 0</label>
            <progress id="Stop" value="0" max="630"></progress>
        </div>
        <p id="ratio"></p>
    </div>
<script>
    fetchFile("Belt.txt")
    async function fetchFile(file) {
        let x = await fetch(file)
        let y = await x.text()
        
    }

    let real_min = -1
    let smoove = true
    let timer = setInterval(function() {  // Function is defined within setInterval so it updates in real time
        let d = new Date()
        document.getElementById("Date").innerHTML = d
        
        ++real_min
        if (smoove) {
            document.getElementById("Move").setAttribute("value", real_min)
            document.getElementById("mValue").innerHTML = "Minutes Running: " + real_min
        }
        else {
            document.getElementById("Stop").setAttribute("value", real_min)
            document.getElementById("sValue").innerHTML = "Minutes Halted: " + real_min
        }

        let MovedTime = Number(document.getElementById("Move").getAttribute("value"))
        let StoppedTime =  Number(document.getElementById("Stop").getAttribute("value"))
        let ratio = (1 - (StoppedTime / MovedTime)) * 100
        document.getElementById("ratio").innerHTML = "Uptime ratio: " + ratio + "%"

        if (real_min === 630) {
            clearInterval(timer)
        }     
    }, 1000)
</script>
</body>
</html>